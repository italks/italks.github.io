# 14. 搭建编程环境

> **摘要**：本文旨在打造一个干净、可复现的开发环境。推荐安装 VS Code 作为全能编辑器，并重点讲解如何通过 Miniconda 或 Venv 管理 Python 虚拟环境，避免污染系统自带 Python，确保不同项目的依赖隔离，为高效编程打下坚实基础。

这一章的目标不是“装一堆软件”，而是把开发环境做到两点：**可复现**（换台机器也能快速恢复）、**不污染系统**（项目依赖和系统依赖分开）。

## 1. 全能编辑器：Visual Studio Code

虽然我们有 Vim，但进行大型项目开发时，VS Code 依然是首选。
1.  **下载**: 去 [code.visualstudio.com](https://code.visualstudio.com) 下载 `.deb` 包。
2.  **安装**: `sudo dpkg -i code_*.deb`。
3.  **插件推荐**:
    *   *Chinese (Simplified)*: 中文语言包。
    *   *Remote - SSH*: 远程开发神器。
    *   *Prettier*: 代码格式化。

如果你更在意“开源/可审计”，也可以选择基于同一内核的 VS Codium；但对大多数人来说，官方版的生态最省心。

## 2. Python 环境管理

Ubuntu 自带 Python3，但为了不弄乱系统环境，强烈建议使用虚拟环境管理器。

先记住一个原则：**别在系统 Python 上用 sudo pip 装依赖**。能跑一时，迟早会把系统依赖关系弄乱。

### 方案一：Miniconda (推荐)
Conda 是一个强大的包管理器和环境管理器。
1.  下载 Miniconda 安装脚本 (Linux 64-bit)。
2.  运行脚本：`bash Miniconda3-latest-Linux-x86_64.sh`。
3.  常用命令：
    ```bash
    conda create -n myenv python=3.9  # 创建环境
    conda activate myenv              # 激活环境
    conda install numpy               # 安装包
    ```

### 方案二：Venv (原生)
如果你只需要轻量级的隔离：
```bash
sudo apt install python3-venv
python3 -m venv myenv
source myenv/bin/activate
```

常见的项目工作流一般长这样：

```bash
python3 -m venv .venv
source .venv/bin/activate
python -m pip install -U pip
pip install -r requirements.txt
```

如果你经常需要安装一些“命令行小工具”（例如 `httpie`、`cookiecutter`），可以考虑用 `pipx` 单独管理，它不会把依赖塞进系统 Python 或项目环境里。

## 3. Node.js 环境 (NVM)

不要直接用 `apt install nodejs`，那个版本太老了，且权限管理麻烦。**NVM (Node Version Manager)** 是最佳实践。

1.  **安装 NVM**:
    ```bash
    curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.7/install.sh | bash
    ```
    重启终端。
2.  **安装 Node.js**:
    ```bash
    nvm install --lts      # 安装最新的长期支持版
    nvm use --lts
    ```
3.  **换源 (npm)**:
    ```bash
    npm config set registry https://registry.npmmirror.com
    ```

如果你在公司/学校网络里遇到 TLS 或代理问题，优先按组织的网络规范配置代理，而不是到处找“魔改脚本”。

## 4. C/C++ 编译环境

Ubuntu 默认不带编译器。我们需要安装 `build-essential` 软件包，它包含了 GCC, G++, Make 等工具。

```bash
sudo apt update
sudo apt install build-essential gdb
```

验证安装：
```bash
gcc --version
make --version
```

## 5. Java 环境

如果你需要开发 Java 或运行 Minecraft 服务器。

```bash
sudo apt install openjdk-17-jdk  # 或者 21, 8
```
如果需要管理多个 Java 版本，可以使用 `update-alternatives` 命令。

到这里，你的 Ubuntu 已经可以覆盖大部分开发场景。接下来你需要做的不是继续“装”，而是把环境沉淀成可迁移的东西：例如把常用包、dotfiles、脚本、镜像源配置都放进 Git 仓库，下一台机器直接拉下来就能用。
